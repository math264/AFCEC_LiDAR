<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Exploration of Walkability in Lexington, KY</title>
    <!-- Loading Styles -->
    <!-- IMPORTING StyleSheets Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Goldman&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Trirong"
    />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""
    />
    <!-- LOAD CSS External File -->
    <link rel="stylesheet" href="/CSS/styles.css" />
    <!-- Default Zoom for Mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

  <body>
    <!-- Header -->
    <div id="header">
      <header class="row">
        <div class="col">
          <h1>Exploration of Walkability in Lexington, KY</h1>
        </div>
        <!-- Info buttons -->
        <button id="info-button">Walkability</button>
        <button id="metrics-button">Metrics</button>
        <button id="data-button">Data</button>
      </header>
    </div>

    <!-- Map Container -->
    <div id="map"></div>

    <!-- map.setView(coords, zoom) -->

    <!-- LEGEND CONTAINER -->
    <div id="ui">
      <h2>Walkability Routes</h2>
      <button id="route1-button">Route 1</button>
      <button id="route2-button">Route 2</button>
      <button id="route3-button">Route 3</button>
    </div>

    <!-- Footer -->
    <div id="footer">
      <div class="transbox">
        <h2>What is Walkability and How Is It Defined?</h2>
        <p>
          Walkability is an important urban design concept that is mutually
          beneficial to the well-being of communities and their efficiency.
          Walking enables urban planning to not only perpetuate sustainable
          transportation and its reduced emissions, but promote healthy and
          livable communities. Initially adopted in response to increased
          population densities and urban sprawl, walkability developed into a
          multi-faceted solution in health, sustainability, and livability.
          Urban planning strives to faciliate more walking into our lifestyle,
          creating the concept of walkability. I believe walkability is a
          skeletal framework that leaves the definition up to interpretation.
          Walkability is effectively driven by categories, or metrics, which are
          easily dictated by the topic and author.
        </p>
      </div>
      <!-- Associations -->
      <div>
        <img
          src="https://uky-gis.github.io/graphics/logo-color-400px.png"
          class="footer-img"
        />
        <h1 style="text-shadow: 2px 2px #ffffff">
          U.S. Median Gross Rent By County
        </h1>
        Data obtained through the American Fact Finder (<a
          href="http://factfinder.census.gov/"
          >factfinder.census.gov</a
        >); 2010 Census, SF1. Map created by
        <a href="https://github.com/math264">math264</a>, Fall 2020.
      </div>
    </div>
    <!-- Metrics -->
    <div id="metrics">
      <div class="transbox">
        <h2>Walkability Metrics</h2>
        <p>
          The concept of walkability is purely metric driven, which are easily
          influenced through the map's or author's intent. There are numerous
          websites that create their own walkability indeces, but promotional
          subtleties through intent and amenities usually follow. Walkability is
          commonly used to categorize and extol communities in the interest of
          raising property appraisals. Nothing wrong with it, but it deviates
          from the fundamentals of walking. Where typical metrics focus on
          amenities and their proximity to promote walking, the metrics used in
          this map consider pedestrian values.
          <br />
          Metrics used to rate Walkability:
        </p>
      </div>
      <!-- Associations -->
      <div>
        <img
          src="https://uky-gis.github.io/graphics/logo-color-400px.png"
          class="footer-img"
        />
        <h1 style="text-shadow: 2px 2px #ffffff">
          U.S. Median Gross Rent By County
        </h1>
        Data obtained through the American Fact Finder (<a
          href="http://factfinder.census.gov/"
          >factfinder.census.gov</a
        >); 2010 Census, SF1. Map created by
        <a href="https://github.com/math264">math264</a>, Fall 2020.
      </div>
    </div>
    <!-- Data -->
    <div id="data">
      <div class="transbox">
        <h2>Ground-truth Data</h2>
        <p>
          Walkability is an important urban design concept that is mutually
          beneficial to the well-being of communities and their efficiency.
          Walking enables urban planning to not only perpetuate sustainable
          transportation and its reduced emissions, but promote healthy and
          livable communities. Initially adopted in response to increased
          population densities and urban sprawl, walkability developed into a
          multi-faceted solution in health, sustainability, and livability.
        </p>
      </div>
      <!-- Associations -->
      <div>
        <img
          src="https://uky-gis.github.io/graphics/logo-color-400px.png"
          class="footer-img"
        />
        <h1 style="text-shadow: 2px 2px #ffffff">
          U.S. Median Gross Rent By County
        </h1>
        Data obtained through the American Fact Finder (<a
          href="http://factfinder.census.gov/"
          >factfinder.census.gov</a
        >); 2010 Census, SF1. Map created by
        <a href="https://github.com/math264">math264</a>, Fall 2020.
      </div>
    </div>

    <!-- LEAFLET.js -->
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    <!-- D3.js -->
    <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
    <!-- JQUERY -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <script>
      // map options
      const options = {
        scrollWheelZoom: true,
        zoomSnap: 0.1,
        dragging: true,
        zoomControl: false,
        center: [38.04, -84.5],
        zoom: 13.75,
      };
      // CREATE LEAFLET MAP
      const map = L.map("map", options);

      // TILELAYER REQUEST
      const tiles = L.tileLayer(
        "https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/dark_all/{z}/{x}/{y}.png",
        {
          attribution:
            '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
          subdomains: "abcd",
        }
      ).addTo(map);

      var commonStyles = {
        weight: 1,
        stroke: 1,
        fillOpacity: 0.8,
      };

      // $.getJSON() here
      var markerLayer = $.getJSON("Raw_Data/Markers.geojson", function (data) {
        var Markers = L.geoJson(data, {
          pointToLayer: function (feature, latlng) {
            return L.circleMarker(latlng, commonStyles);
          },
          onEachFeature: function (feature, layer) {
            layer.on("mouseover", function () {
              layer.setStyle({
                fillColor: "black",
              });
            });
            layer.on("mouseout", function () {
              layer.setStyle({
                fillColor: "aqua",
              });
            });
            var props = layer.feature.properties;
            var popup = `<h2>Metric Analysis</h2>
              <b>Cleanliness:</b> ${props["Cleanliness"]}
              <br>
              <b>Atmosphere:</b> ${props["Atmosphere"]}
              <br>
              <b>Social Interaction:</b> ${props["Interaction"]}
              <br>
              <b>Sidewalk:</b> ${props["Sidewalk"]}
              <br>
              <b>Traffic:</b> ${props["Traffic Volume"]}
              <br>
              <b>Visibility:</b> ${props["Visibility"]}
              <br>
              <b>Design:</b> ${props["Design"]}
              <br>
              <br>
              <img class='popup-img' src='${props["Path"]}' alt=""/>`;

            layer.bindPopup(popup);
          },
        }).addTo(map);
      });

      // use D3 fetch to request data with async requests
      /* --------------- Toggle on/off info footer content ---------------  */
      var infoClicked = false; // start with false condition
      var infoContainer = $("#footer");
      var infoShade = $("#info-button");
      var legend = $("#ui")

      $("#info-button").click(function () {
        // create button that changes color on click
        if (infoClicked == true) {
          console.log("info click false");
          infoContainer.css("display", "none");
          legend.css("display", "block")
          infoShade.css("background-color", "#045a8d");
          infoClicked = false;
        } else {
          console.log("info click true");
          infoContainer.css("display", "block");
          legend.css("display", "none")
          infoShade.css("background-color", "#49a4d8");
          infoClicked = true;
        }
      });
      /* --------------- Toggle on/off info footer content ---------------  */
      var metricsClicked = false; // start with false condition
      var metricsContainer = $("#metrics");
      var metricsShade = $("#metrics-button");

      $("#metrics-button").click(function () {
        // create button that changes color on click
        if (metricsClicked == true) {
          console.log("metric click false");
          metricsContainer.css("display", "none");
          legend.css("display", "block")
          metricsShade.css("background-color", "#045a8d");
          metricsClicked = false;
        } else {
          console.log("metric click true");
          metricsContainer.css("display", "block");
          legend.css("display", "none")
          metricsShade.css("background-color", "#49a4d8");
          metricsClicked = true;
        }
      });
      /* --------------- Toggle on/off info footer content ---------------  */
      var dataClicked = false; // start with false condition
      var dataContainer = $("#data");
      var dataShade = $("#data-button");

      $("#data-button").click(function () {
        // create button that changes color on click
        if (dataClicked == true) {
          console.log("data click false");
          dataContainer.css("display", "none");
          legend.css("display", "block")
          dataShade.css("background-color", "#045a8d");
          dataClicked = false;
        } else {
          console.log("data click true");
          dataContainer.css("display", "block");
          legend.css("display", "none")
          dataShade.css("background-color", "#49a4d8");
          dataClicked = true;
        }
      });
      /* --------------- Route 1 Button ---------------  */
      var roneClicked = false; // start with false condition
      var roneShade = $("#route1-button");
      var roneCoords = [38.025, -84.4225];
      var roneZoom = 16.8;

      $("#route1-button").click(function () {
        // create button that changes color on click
        if (infoClicked == true) {
          console.log("route 1 click false");
          roneShade.css("background-color", "#045a8d");
          infoClicked = false;
        } else {
          console.log("route 1 click true");
          map.setView(roneCoords, roneZoom);
          roneShade.css("background-color", "#49a4d8");
          infoClicked = true;
        }
      });
      /* --------------- Route 2 Button ---------------  */
      var rtwoClicked = false; // start with false condition
      var rtwoShade = $("#route2-button");
      var rtwoCoords = [38.02, -84.416];
      var rtwoZoom = 16.8;

      $("#route2-button").click(function () {
        // create button that changes color on click
        if (rtwoClicked == true) {
          console.log("route 2 click false");
          rtwoShade.css("background-color", "#045a8d");
          rtwoClicked = false;
        } else {
          console.log("route 2 click true");
          map.setView(rtwoCoords, rtwoZoom);
          rtwoShade.css("background-color", "#49a4d8");
          rtwoClicked = true;
        }
      });
      /* --------------- Route 3 Button --------------- */ 
      var rthreeClicked = false; // start with false condition
      var rthreeShade = $("#route3-button");
      var rthreeCoords = [38.050,-84.493];
      var rthreeZoom = 16.8;
      $("#route3-button").click(function () {
        // create button that changes color on click
        if (rthreeClicked == true) {
          console.log("route 3 click false");
          rthreeShade.css("background-color", "#045a8d");
          rthreelicked = false;
        } else {
          console.log("route 3 click true");
          map.setView(rthreeCoords, rthreeZoom);
          rthreeShade.css("background-color", "#49a4d8");
          rthreeClicked = true;
        }
      });
    </script>
  </body>
</html>
